{"ast":null,"code":"var _jsxFileName = \"/Users/darrel/SMART-DOCS-main/frontend/src/pages/documents/FileView.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { Container, Row, Col, Card, Button, Alert, Modal } from \"react-bootstrap\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport api from \"../../services/api\";\nimport Cropper from \"react-cropper\";\nimport \"cropperjs/dist/cropper.css\";\nimport \"../../css/documents/fileview.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FileView = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const imgRef = useRef(null);\n  const cropperRef = useRef(null);\n  const [fileUrl, setFileUrl] = useState(null);\n  const [isImage, setIsImage] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [fileName, setFileName] = useState(\"\");\n\n  // OCR\n  const [ocrWords, setOcrWords] = useState([]);\n  const [showOCR, setShowOCR] = useState(false);\n  const [ocrLoading, setOcrLoading] = useState(false);\n\n  // Crop\n  const [showCrop, setShowCrop] = useState(false);\n  const [savingCrop, setSavingCrop] = useState(false);\n  useEffect(() => {\n    fetchDocument();\n  }, [id]);\n  const fetchDocument = async () => {\n    try {\n      setLoading(true);\n      const infoRes = await api.get(`/document/info/${id}`);\n      setFileName(infoRes.data.title);\n      const fileRes = await api.get(`/document/view/${id}`, {\n        responseType: \"blob\"\n      });\n      if (fileRes.data.type.includes(\"image\")) {\n        setIsImage(true);\n        setFileUrl(URL.createObjectURL(fileRes.data));\n      } else {\n        setFileUrl(URL.createObjectURL(fileRes.data));\n      }\n    } catch (err) {\n      setErrorMsg(\"Failed to load document.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /* -------------------------\n     OCR\n  -------------------------- */\n  const handleOCR = async () => {\n    if (showOCR) {\n      setShowOCR(false);\n      return;\n    }\n    try {\n      setOcrLoading(true);\n      if (ocrWords.length === 0) {\n        var _res$data$words;\n        const res = await api.get(`/document/ocr/${id}`);\n        if (!((_res$data$words = res.data.words) !== null && _res$data$words !== void 0 && _res$data$words.length)) {\n          alert(\"No text found in image.\");\n          return;\n        }\n        setOcrWords(res.data.words);\n      }\n      setShowOCR(true);\n    } catch {\n      alert(\"OCR failed.\");\n    } finally {\n      setOcrLoading(false);\n    }\n  };\n\n  /* -------------------------\n     CROP LOGIC\n  -------------------------- */\n  const handleCropSave = async () => {\n    try {\n      var _cropperRef$current;\n      setSavingCrop(true);\n      const cropper = (_cropperRef$current = cropperRef.current) === null || _cropperRef$current === void 0 ? void 0 : _cropperRef$current.cropper;\n      if (!cropper) return;\n      const canvas = cropper.getCroppedCanvas();\n      const blob = await new Promise(resolve => canvas.toBlob(resolve, \"image/png\"));\n      const formData = new FormData();\n      formData.append(\"file\", blob, \"cropped.png\");\n      await api.post(`/document/crop/${id}`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      setShowCrop(false);\n      setShowOCR(false);\n      setOcrWords([]);\n      fetchDocument(); // reload updated image\n    } catch (err) {\n      alert(\"Failed to save crop.\");\n    } finally {\n      setSavingCrop(false);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-5 text-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner-border text-primary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 7\n  }, this);\n  if (errorMsg) return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-5\",\n    children: /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: errorMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 7\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-4 mb-5\",\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"mb-3\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline-secondary\",\n          onClick: () => navigate(-1),\n          children: \"\\u2190 Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"shadow-sm border-0\",\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        className: \"d-flex justify-content-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: fileName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), isImage && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"warning\",\n            className: \"me-2\",\n            onClick: () => setShowCrop(true),\n            children: \"Crop\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: showOCR ? \"secondary\" : \"success\",\n            onClick: handleOCR,\n            disabled: ocrLoading,\n            children: ocrLoading ? \"Scanning...\" : showOCR ? \"Hide OCR\" : \"OCR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: isImage && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-ocr-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            ref: imgRef,\n            src: fileUrl,\n            alt: fileName,\n            className: \"fileview-image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this), showOCR && imgRef.current && ocrWords.map((w, i) => {\n            const scaleX = imgRef.current.clientWidth / imgRef.current.naturalWidth;\n            const scaleY = imgRef.current.clientHeight / imgRef.current.naturalHeight;\n            return /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ocr-word\",\n              style: {\n                left: `${w.x0 * scaleX}px`,\n                top: `${w.y0 * scaleY}px`,\n                width: `${(w.x1 - w.x0) * scaleX}px`,\n                height: `${(w.y1 - w.y0) * scaleY}px`\n              },\n              children: w.text\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 21\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showCrop,\n      onHide: () => setShowCrop(false),\n      size: \"lg\",\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Crop Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Cropper, {\n          src: fileUrl,\n          style: {\n            height: 400,\n            width: \"100%\"\n          },\n          ref: cropperRef,\n          viewMode: 1,\n          guides: true,\n          background: false,\n          responsive: true,\n          autoCropArea: 1,\n          checkOrientation: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => setShowCrop(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleCropSave,\n          disabled: savingCrop,\n          children: savingCrop ? \"Saving...\" : \"Save Crop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this);\n};\n_s(FileView, \"fqIHHykEXzfnk8s+XSCz/eF750Q=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = FileView;\nexport default FileView;\nvar _c;\n$RefreshReg$(_c, \"FileView\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Container","Row","Col","Card","Button","Alert","Modal","useParams","useNavigate","api","Cropper","jsxDEV","_jsxDEV","FileView","_s","id","navigate","imgRef","cropperRef","fileUrl","setFileUrl","isImage","setIsImage","loading","setLoading","errorMsg","setErrorMsg","fileName","setFileName","ocrWords","setOcrWords","showOCR","setShowOCR","ocrLoading","setOcrLoading","showCrop","setShowCrop","savingCrop","setSavingCrop","fetchDocument","infoRes","get","data","title","fileRes","responseType","type","includes","URL","createObjectURL","err","handleOCR","length","_res$data$words","res","words","alert","handleCropSave","_cropperRef$current","cropper","current","canvas","getCroppedCanvas","blob","Promise","resolve","toBlob","formData","FormData","append","post","headers","className","children","_jsxFileName","lineNumber","columnNumber","variant","onClick","Header","disabled","Body","ref","src","alt","map","w","i","scaleX","clientWidth","naturalWidth","scaleY","clientHeight","naturalHeight","style","left","x0","top","y0","width","x1","height","y1","text","show","onHide","size","centered","closeButton","Title","viewMode","guides","background","responsive","autoCropArea","checkOrientation","Footer","_c","$RefreshReg$"],"sources":["/Users/darrel/SMART-DOCS-main/frontend/src/pages/documents/FileView.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { Container, Row, Col, Card, Button, Alert, Modal } from \"react-bootstrap\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport api from \"../../services/api\";\nimport Cropper from \"react-cropper\";\nimport \"cropperjs/dist/cropper.css\";\nimport \"../../css/documents/fileview.css\";\n\nconst FileView = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const imgRef = useRef(null);\n  const cropperRef = useRef(null);\n\n  const [fileUrl, setFileUrl] = useState(null);\n  const [isImage, setIsImage] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [fileName, setFileName] = useState(\"\");\n\n  // OCR\n  const [ocrWords, setOcrWords] = useState([]);\n  const [showOCR, setShowOCR] = useState(false);\n  const [ocrLoading, setOcrLoading] = useState(false);\n\n  // Crop\n  const [showCrop, setShowCrop] = useState(false);\n  const [savingCrop, setSavingCrop] = useState(false);\n\n  useEffect(() => {\n    fetchDocument();\n  }, [id]);\n\n  const fetchDocument = async () => {\n    try {\n      setLoading(true);\n      const infoRes = await api.get(`/document/info/${id}`);\n      setFileName(infoRes.data.title);\n\n      const fileRes = await api.get(`/document/view/${id}`, {\n        responseType: \"blob\",\n      });\n\n      if (fileRes.data.type.includes(\"image\")) {\n        setIsImage(true);\n        setFileUrl(URL.createObjectURL(fileRes.data));\n      } else {\n        setFileUrl(URL.createObjectURL(fileRes.data));\n      }\n    } catch (err) {\n      setErrorMsg(\"Failed to load document.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /* -------------------------\n     OCR\n  -------------------------- */\n  const handleOCR = async () => {\n    if (showOCR) {\n      setShowOCR(false);\n      return;\n    }\n\n    try {\n      setOcrLoading(true);\n      if (ocrWords.length === 0) {\n        const res = await api.get(`/document/ocr/${id}`);\n        if (!res.data.words?.length) {\n          alert(\"No text found in image.\");\n          return;\n        }\n        setOcrWords(res.data.words);\n      }\n      setShowOCR(true);\n    } catch {\n      alert(\"OCR failed.\");\n    } finally {\n      setOcrLoading(false);\n    }\n  };\n\n  /* -------------------------\n     CROP LOGIC\n  -------------------------- */\n  const handleCropSave = async () => {\n    try {\n      setSavingCrop(true);\n\n      const cropper = cropperRef.current?.cropper;\n      if (!cropper) return;\n\n      const canvas = cropper.getCroppedCanvas();\n      const blob = await new Promise((resolve) =>\n        canvas.toBlob(resolve, \"image/png\")\n      );\n\n      const formData = new FormData();\n      formData.append(\"file\", blob, \"cropped.png\");\n\n      await api.post(`/document/crop/${id}`, formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n\n      setShowCrop(false);\n      setShowOCR(false);\n      setOcrWords([]);\n      fetchDocument(); // reload updated image\n    } catch (err) {\n      alert(\"Failed to save crop.\");\n    } finally {\n      setSavingCrop(false);\n    }\n  };\n\n  if (loading)\n    return (\n      <Container className=\"mt-5 text-center\">\n        <div className=\"spinner-border text-primary\"></div>\n      </Container>\n    );\n\n  if (errorMsg)\n    return (\n      <Container className=\"mt-5\">\n        <Alert variant=\"danger\">{errorMsg}</Alert>\n      </Container>\n    );\n\n  return (\n    <Container className=\"mt-4 mb-5\">\n      <Row className=\"mb-3\">\n        <Col>\n          <Button variant=\"outline-secondary\" onClick={() => navigate(-1)}>\n            ‚Üê Back\n          </Button>\n        </Col>\n      </Row>\n\n      <Card className=\"shadow-sm border-0\">\n        <Card.Header className=\"d-flex justify-content-between\">\n          <strong>{fileName}</strong>\n\n          {isImage && (\n            <div>\n              <Button\n                variant=\"warning\"\n                className=\"me-2\"\n                onClick={() => setShowCrop(true)}\n              >\n                Crop\n              </Button>\n\n              <Button\n                variant={showOCR ? \"secondary\" : \"success\"}\n                onClick={handleOCR}\n                disabled={ocrLoading}\n              >\n                {ocrLoading ? \"Scanning...\" : showOCR ? \"Hide OCR\" : \"OCR\"}\n              </Button>\n            </div>\n          )}\n        </Card.Header>\n\n        <Card.Body>\n          {isImage && (\n            <div className=\"image-ocr-container\">\n              <img\n                ref={imgRef}\n                src={fileUrl}\n                alt={fileName}\n                className=\"fileview-image\"\n              />\n\n              {showOCR &&\n                imgRef.current &&\n                ocrWords.map((w, i) => {\n                  const scaleX =\n                    imgRef.current.clientWidth /\n                    imgRef.current.naturalWidth;\n                  const scaleY =\n                    imgRef.current.clientHeight /\n                    imgRef.current.naturalHeight;\n\n                  return (\n                    <span\n                      key={i}\n                      className=\"ocr-word\"\n                      style={{\n                        left: `${w.x0 * scaleX}px`,\n                        top: `${w.y0 * scaleY}px`,\n                        width: `${(w.x1 - w.x0) * scaleX}px`,\n                        height: `${(w.y1 - w.y0) * scaleY}px`,\n                      }}\n                    >\n                      {w.text}\n                    </span>\n                  );\n                })}\n            </div>\n          )}\n        </Card.Body>\n      </Card>\n\n      {/* -------------------------\n         CROP MODAL\n      -------------------------- */}\n      <Modal\n        show={showCrop}\n        onHide={() => setShowCrop(false)}\n        size=\"lg\"\n        centered\n      >\n        <Modal.Header closeButton>\n          <Modal.Title>Crop Image</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n          <Cropper\n            src={fileUrl}\n            style={{ height: 400, width: \"100%\" }}\n            ref={cropperRef}\n            viewMode={1}\n            guides={true}\n            background={false}\n            responsive={true}\n            autoCropArea={1}\n            checkOrientation={false}\n          />\n        </Modal.Body>\n\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={() => setShowCrop(false)}>\n            Cancel\n          </Button>\n          <Button\n            variant=\"primary\"\n            onClick={handleCropSave}\n            disabled={savingCrop}\n          >\n            {savingCrop ? \"Saving...\" : \"Save Crop\"}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </Container>\n  );\n};\n\nexport default FileView;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,SAAS,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAEC,MAAM,EAAEC,KAAK,EAAEC,KAAK,QAAQ,iBAAiB;AACjF,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,OAAOC,GAAG,MAAM,oBAAoB;AACpC,OAAOC,OAAO,MAAM,eAAe;AACnC,OAAO,4BAA4B;AACnC,OAAO,kCAAkC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1C,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAM;IAAEC;EAAG,CAAC,GAAGR,SAAS,CAAC,CAAC;EAC1B,MAAMS,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9B,MAAMS,MAAM,GAAGlB,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAMmB,UAAU,GAAGnB,MAAM,CAAC,IAAI,CAAC;EAE/B,MAAM,CAACoB,OAAO,EAAEC,UAAU,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACuB,OAAO,EAAEC,UAAU,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACyB,OAAO,EAAEC,UAAU,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC2B,QAAQ,EAAEC,WAAW,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAAC6B,QAAQ,EAAEC,WAAW,CAAC,GAAG9B,QAAQ,CAAC,EAAE,CAAC;;EAE5C;EACA,MAAM,CAAC+B,QAAQ,EAAEC,WAAW,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACiC,OAAO,EAAEC,UAAU,CAAC,GAAGlC,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACmC,UAAU,EAAEC,aAAa,CAAC,GAAGpC,QAAQ,CAAC,KAAK,CAAC;;EAEnD;EACA,MAAM,CAACqC,QAAQ,EAAEC,WAAW,CAAC,GAAGtC,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACuC,UAAU,EAAEC,aAAa,CAAC,GAAGxC,QAAQ,CAAC,KAAK,CAAC;EAEnDD,SAAS,CAAC,MAAM;IACd0C,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACxB,EAAE,CAAC,CAAC;EAER,MAAMwB,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACFf,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMgB,OAAO,GAAG,MAAM/B,GAAG,CAACgC,GAAG,CAAC,kBAAkB1B,EAAE,EAAE,CAAC;MACrDa,WAAW,CAACY,OAAO,CAACE,IAAI,CAACC,KAAK,CAAC;MAE/B,MAAMC,OAAO,GAAG,MAAMnC,GAAG,CAACgC,GAAG,CAAC,kBAAkB1B,EAAE,EAAE,EAAE;QACpD8B,YAAY,EAAE;MAChB,CAAC,CAAC;MAEF,IAAID,OAAO,CAACF,IAAI,CAACI,IAAI,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAE;QACvCzB,UAAU,CAAC,IAAI,CAAC;QAChBF,UAAU,CAAC4B,GAAG,CAACC,eAAe,CAACL,OAAO,CAACF,IAAI,CAAC,CAAC;MAC/C,CAAC,MAAM;QACLtB,UAAU,CAAC4B,GAAG,CAACC,eAAe,CAACL,OAAO,CAACF,IAAI,CAAC,CAAC;MAC/C;IACF,CAAC,CAAC,OAAOQ,GAAG,EAAE;MACZxB,WAAW,CAAC,0BAA0B,CAAC;IACzC,CAAC,SAAS;MACRF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;AACF;AACA;EACE,MAAM2B,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAIpB,OAAO,EAAE;MACXC,UAAU,CAAC,KAAK,CAAC;MACjB;IACF;IAEA,IAAI;MACFE,aAAa,CAAC,IAAI,CAAC;MACnB,IAAIL,QAAQ,CAACuB,MAAM,KAAK,CAAC,EAAE;QAAA,IAAAC,eAAA;QACzB,MAAMC,GAAG,GAAG,MAAM7C,GAAG,CAACgC,GAAG,CAAC,iBAAiB1B,EAAE,EAAE,CAAC;QAChD,IAAI,GAAAsC,eAAA,GAACC,GAAG,CAACZ,IAAI,CAACa,KAAK,cAAAF,eAAA,eAAdA,eAAA,CAAgBD,MAAM,GAAE;UAC3BI,KAAK,CAAC,yBAAyB,CAAC;UAChC;QACF;QACA1B,WAAW,CAACwB,GAAG,CAACZ,IAAI,CAACa,KAAK,CAAC;MAC7B;MACAvB,UAAU,CAAC,IAAI,CAAC;IAClB,CAAC,CAAC,MAAM;MACNwB,KAAK,CAAC,aAAa,CAAC;IACtB,CAAC,SAAS;MACRtB,aAAa,CAAC,KAAK,CAAC;IACtB;EACF,CAAC;;EAED;AACF;AACA;EACE,MAAMuB,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MAAA,IAAAC,mBAAA;MACFpB,aAAa,CAAC,IAAI,CAAC;MAEnB,MAAMqB,OAAO,IAAAD,mBAAA,GAAGxC,UAAU,CAAC0C,OAAO,cAAAF,mBAAA,uBAAlBA,mBAAA,CAAoBC,OAAO;MAC3C,IAAI,CAACA,OAAO,EAAE;MAEd,MAAME,MAAM,GAAGF,OAAO,CAACG,gBAAgB,CAAC,CAAC;MACzC,MAAMC,IAAI,GAAG,MAAM,IAAIC,OAAO,CAAEC,OAAO,IACrCJ,MAAM,CAACK,MAAM,CAACD,OAAO,EAAE,WAAW,CACpC,CAAC;MAED,MAAME,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEN,IAAI,EAAE,aAAa,CAAC;MAE5C,MAAMtD,GAAG,CAAC6D,IAAI,CAAC,kBAAkBvD,EAAE,EAAE,EAAEoD,QAAQ,EAAE;QAC/CI,OAAO,EAAE;UAAE,cAAc,EAAE;QAAsB;MACnD,CAAC,CAAC;MAEFnC,WAAW,CAAC,KAAK,CAAC;MAClBJ,UAAU,CAAC,KAAK,CAAC;MACjBF,WAAW,CAAC,EAAE,CAAC;MACfS,aAAa,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC,CAAC,OAAOW,GAAG,EAAE;MACZM,KAAK,CAAC,sBAAsB,CAAC;IAC/B,CAAC,SAAS;MACRlB,aAAa,CAAC,KAAK,CAAC;IACtB;EACF,CAAC;EAED,IAAIf,OAAO,EACT,oBACEX,OAAA,CAACZ,SAAS;IAACwE,SAAS,EAAC,kBAAkB;IAAAC,QAAA,eACrC7D,OAAA;MAAK4D,SAAS,EAAC;IAA6B;MAAA7C,QAAA,EAAA+C,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM;EAAC;IAAAjD,QAAA,EAAA+C,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC1C,CAAC;EAGhB,IAAInD,QAAQ,EACV,oBACEb,OAAA,CAACZ,SAAS;IAACwE,SAAS,EAAC,MAAM;IAAAC,QAAA,eACzB7D,OAAA,CAACP,KAAK;MAACwE,OAAO,EAAC,QAAQ;MAAAJ,QAAA,EAAEhD;IAAQ;MAAAE,QAAA,EAAA+C,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ;EAAC;IAAAjD,QAAA,EAAA+C,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACjC,CAAC;EAGhB,oBACEhE,OAAA,CAACZ,SAAS;IAACwE,SAAS,EAAC,WAAW;IAAAC,QAAA,gBAC9B7D,OAAA,CAACX,GAAG;MAACuE,SAAS,EAAC,MAAM;MAAAC,QAAA,eACnB7D,OAAA,CAACV,GAAG;QAAAuE,QAAA,eACF7D,OAAA,CAACR,MAAM;UAACyE,OAAO,EAAC,mBAAmB;UAACC,OAAO,EAAEA,CAAA,KAAM9D,QAAQ,CAAC,CAAC,CAAC,CAAE;UAAAyD,QAAA,EAAC;QAEjE;UAAA9C,QAAA,EAAA+C,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAjD,QAAA,EAAA+C,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAjD,QAAA,EAAA+C,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAENhE,OAAA,CAACT,IAAI;MAACqE,SAAS,EAAC,oBAAoB;MAAAC,QAAA,gBAClC7D,OAAA,CAACT,IAAI,CAAC4E,MAAM;QAACP,SAAS,EAAC,gCAAgC;QAAAC,QAAA,gBACrD7D,OAAA;UAAA6D,QAAA,EAAS9C;QAAQ;UAAAA,QAAA,EAAA+C,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAS,CAAC,EAE1BvD,OAAO,iBACNT,OAAA;UAAA6D,QAAA,gBACE7D,OAAA,CAACR,MAAM;YACLyE,OAAO,EAAC,SAAS;YACjBL,SAAS,EAAC,MAAM;YAChBM,OAAO,EAAEA,CAAA,KAAM1C,WAAW,CAAC,IAAI,CAAE;YAAAqC,QAAA,EAClC;UAED;YAAA9C,QAAA,EAAA+C,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAEThE,OAAA,CAACR,MAAM;YACLyE,OAAO,EAAE9C,OAAO,GAAG,WAAW,GAAG,SAAU;YAC3C+C,OAAO,EAAE3B,SAAU;YACnB6B,QAAQ,EAAE/C,UAAW;YAAAwC,QAAA,EAEpBxC,UAAU,GAAG,aAAa,GAAGF,OAAO,GAAG,UAAU,GAAG;UAAK;YAAAJ,QAAA,EAAA+C,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpD,CAAC;QAAA;UAAAjD,QAAA,EAAA+C,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CACN;MAAA;QAAAjD,QAAA,EAAA+C,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACU,CAAC,eAEdhE,OAAA,CAACT,IAAI,CAAC8E,IAAI;QAAAR,QAAA,EACPpD,OAAO,iBACNT,OAAA;UAAK4D,SAAS,EAAC,qBAAqB;UAAAC,QAAA,gBAClC7D,OAAA;YACEsE,GAAG,EAAEjE,MAAO;YACZkE,GAAG,EAAEhE,OAAQ;YACbiE,GAAG,EAAEzD,QAAS;YACd6C,SAAS,EAAC;UAAgB;YAAA7C,QAAA,EAAA+C,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3B,CAAC,EAED7C,OAAO,IACNd,MAAM,CAAC2C,OAAO,IACd/B,QAAQ,CAACwD,GAAG,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;YACrB,MAAMC,MAAM,GACVvE,MAAM,CAAC2C,OAAO,CAAC6B,WAAW,GAC1BxE,MAAM,CAAC2C,OAAO,CAAC8B,YAAY;YAC7B,MAAMC,MAAM,GACV1E,MAAM,CAAC2C,OAAO,CAACgC,YAAY,GAC3B3E,MAAM,CAAC2C,OAAO,CAACiC,aAAa;YAE9B,oBACEjF,OAAA;cAEE4D,SAAS,EAAC,UAAU;cACpBsB,KAAK,EAAE;gBACLC,IAAI,EAAE,GAAGT,CAAC,CAACU,EAAE,GAAGR,MAAM,IAAI;gBAC1BS,GAAG,EAAE,GAAGX,CAAC,CAACY,EAAE,GAAGP,MAAM,IAAI;gBACzBQ,KAAK,EAAE,GAAG,CAACb,CAAC,CAACc,EAAE,GAAGd,CAAC,CAACU,EAAE,IAAIR,MAAM,IAAI;gBACpCa,MAAM,EAAE,GAAG,CAACf,CAAC,CAACgB,EAAE,GAAGhB,CAAC,CAACY,EAAE,IAAIP,MAAM;cACnC,CAAE;cAAAlB,QAAA,EAEDa,CAAC,CAACiB;YAAI,GATFhB,CAAC;cAAA5D,QAAA,EAAA+C,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAUF,CAAC;UAEX,CAAC,CAAC;QAAA;UAAAjD,QAAA,EAAA+C,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD;MACN;QAAAjD,QAAA,EAAA+C,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACQ,CAAC;IAAA;MAAAjD,QAAA,EAAA+C,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC,eAKPhE,OAAA,CAACN,KAAK;MACJkG,IAAI,EAAErE,QAAS;MACfsE,MAAM,EAAEA,CAAA,KAAMrE,WAAW,CAAC,KAAK,CAAE;MACjCsE,IAAI,EAAC,IAAI;MACTC,QAAQ;MAAAlC,QAAA,gBAER7D,OAAA,CAACN,KAAK,CAACyE,MAAM;QAAC6B,WAAW;QAAAnC,QAAA,eACvB7D,OAAA,CAACN,KAAK,CAACuG,KAAK;UAAApC,QAAA,EAAC;QAAU;UAAA9C,QAAA,EAAA+C,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAa;MAAC;QAAAjD,QAAA,EAAA+C,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzB,CAAC,eAEfhE,OAAA,CAACN,KAAK,CAAC2E,IAAI;QAAAR,QAAA,eACT7D,OAAA,CAACF,OAAO;UACNyE,GAAG,EAAEhE,OAAQ;UACb2E,KAAK,EAAE;YAAEO,MAAM,EAAE,GAAG;YAAEF,KAAK,EAAE;UAAO,CAAE;UACtCjB,GAAG,EAAEhE,UAAW;UAChB4F,QAAQ,EAAE,CAAE;UACZC,MAAM,EAAE,IAAK;UACbC,UAAU,EAAE,KAAM;UAClBC,UAAU,EAAE,IAAK;UACjBC,YAAY,EAAE,CAAE;UAChBC,gBAAgB,EAAE;QAAM;UAAAxF,QAAA,EAAA+C,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzB;MAAC;QAAAjD,QAAA,EAAA+C,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACQ,CAAC,eAEbhE,OAAA,CAACN,KAAK,CAAC8G,MAAM;QAAA3C,QAAA,gBACX7D,OAAA,CAACR,MAAM;UAACyE,OAAO,EAAC,WAAW;UAACC,OAAO,EAAEA,CAAA,KAAM1C,WAAW,CAAC,KAAK,CAAE;UAAAqC,QAAA,EAAC;QAE/D;UAAA9C,QAAA,EAAA+C,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACThE,OAAA,CAACR,MAAM;UACLyE,OAAO,EAAC,SAAS;UACjBC,OAAO,EAAErB,cAAe;UACxBuB,QAAQ,EAAE3C,UAAW;UAAAoC,QAAA,EAEpBpC,UAAU,GAAG,WAAW,GAAG;QAAW;UAAAV,QAAA,EAAA+C,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjC,CAAC;MAAA;QAAAjD,QAAA,EAAA+C,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACG,CAAC;IAAA;MAAAjD,QAAA,EAAA+C,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC;EAAA;IAAAjD,QAAA,EAAA+C,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEhB,CAAC;AAAC9D,EAAA,CA/OID,QAAQ;EAAA,QACGN,SAAS,EACPC,WAAW;AAAA;AAAA6G,EAAA,GAFxBxG,QAAQ;AAiPd,eAAeA,QAAQ;AAAC,IAAAwG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}