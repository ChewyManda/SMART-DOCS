{"ast":null,"code":"var _jsxFileName = \"/Users/darrel/SMART-DOCS-main/frontend/src/pages/documents/UploadDocument.jsx\",\n  _s = $RefreshSig$();\n// UploadDocument.jsx\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { Container, Row, Col, Card, Form, Button, Alert, Badge, InputGroup, Spinner, Pagination } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../../services/api';\nimport '../../css/documents/uploaddocument.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ITEMS_PER_PAGE = 10;\nconst UploadDocument = ({\n  user\n}) => {\n  _s();\n  const navigate = useNavigate();\n\n  // Form fields\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [file, setFile] = useState(null);\n  const [fileName, setFileName] = useState('');\n\n  // Users\n  const [users, setUsers] = useState([]);\n  const [recipients, setRecipients] = useState([]);\n\n  // Recipient UI state\n  const [recSearch, setRecSearch] = useState('');\n  const [recDeptFilter, setRecDeptFilter] = useState('all');\n  const [recLevelFilter, setRecLevelFilter] = useState('all');\n  const [recPage, setRecPage] = useState(1);\n\n  // Status\n  const [loading, setLoading] = useState(false);\n  const [loadingUsers, setLoadingUsers] = useState(true);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // Fetch users\n  useEffect(() => {\n    let mounted = true;\n    const fetchUsers = async () => {\n      setLoadingUsers(true);\n      try {\n        const res = await api.get('/admin/users');\n        if (!mounted) return;\n        setUsers(Array.isArray(res.data) ? res.data : res.data.data || []);\n      } catch (err) {\n        console.error('Failed to fetch users', err);\n      } finally {\n        if (mounted) setLoadingUsers(false);\n      }\n    };\n    fetchUsers();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  // Filtered users\n  const filteredUsers = useMemo(() => {\n    const q = recSearch.trim().toLowerCase();\n    return users.filter(u => {\n      if (recDeptFilter !== 'all' && (u.department || '').toLowerCase() !== recDeptFilter.toLowerCase()) return false;\n      if (recLevelFilter !== 'all' && String(u.access_level) !== String(recLevelFilter)) return false;\n      if (!q) return true;\n      return (u.name || '').toLowerCase().includes(q) || (u.email || '').toLowerCase().includes(q) || (u.department || '').toLowerCase().includes(q);\n    });\n  }, [users, recSearch, recDeptFilter, recLevelFilter]);\n  const totalRecPages = Math.max(1, Math.ceil(filteredUsers.length / ITEMS_PER_PAGE));\n  const paginatedUsers = useMemo(() => {\n    const start = (recPage - 1) * ITEMS_PER_PAGE;\n    return filteredUsers.slice(start, start + ITEMS_PER_PAGE);\n  }, [filteredUsers, recPage]);\n\n  // Recipient helpers\n  const handleRecipientToggle = userId => {\n    setRecipients(prev => prev.includes(userId) ? prev.filter(id => id !== userId) : [...prev, userId]);\n  };\n  const selectAllFiltered = () => {\n    const ids = filteredUsers.map(u => u.id);\n    setRecipients(prev => Array.from(new Set([...prev, ...ids])));\n  };\n  const clearAllRecipients = () => setRecipients([]);\n\n  // File handling\n  const handleFileChange = e => {\n    var _e$target$files;\n    const f = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!f) return;\n    setFile(f);\n    setFileName(f.name);\n    setError('');\n  };\n  const clearFile = () => {\n    setFile(null);\n    setFileName('');\n    document.getElementById('fileInput') && (document.getElementById('fileInput').value = '');\n  };\n\n  // Submit\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    if (!title.trim()) return setError('Document title is required.');\n    if (!file) return setError('Please select a file to upload.');\n    if (!recipients.length) return setError('Select at least one recipient.');\n    setLoading(true);\n    try {\n      const fd = new FormData();\n      fd.append('title', title);\n      fd.append('description', description);\n      fd.append('file', file);\n      recipients.forEach(id => fd.append('recipients[]', id));\n\n      // Upload file and let backend handle OCR\n      await api.post('/document', fd, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setSuccess('Document uploaded successfully!');\n      setTitle('');\n      setDescription('');\n      setFile(null);\n      setFileName('');\n      setRecipients([]);\n      setRecSearch('');\n      setRecDeptFilter('all');\n      setRecLevelFilter('all');\n      setRecPage(1);\n      setTimeout(() => navigate('/document'), 1400);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Upload error:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to upload document.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const deptOptions = useMemo(() => ['all', ...Array.from(new Set(users.map(u => u.department).filter(Boolean)))], [users]);\n  const accessLevelOptions = useMemo(() => ['all', ...Array.from(new Set(users.map(u => u.access_level).filter(v => v !== undefined && v !== null))).sort((a, b) => a - b)], [users]);\n  const recipientLabel = count => `${count} ${count === 1 ? 'recipient' : 'recipients'}`;\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: true,\n    className: \"upload-document-container\",\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"mb-4\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"dashboard-title\",\n          children: \"Upload Document\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"dashboard-subtitle\",\n          children: \"Upload and distribute documents\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"g-4\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          lg: 8,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"custom-card-details shadow-sm border-0\",\n            children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n              className: \"custom-card-header\",\n              children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"mb-0\",\n                children: \"Document Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n                variant: \"danger\",\n                dismissible: true,\n                onClose: () => setError(''),\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 27\n              }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n                variant: \"success\",\n                dismissible: true,\n                onClose: () => setSuccess(''),\n                children: success\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  className: \"fw-bold\",\n                  children: [\"Title \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-danger\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"text\",\n                  value: title,\n                  onChange: e => setTitle(e.target.value),\n                  placeholder: \"Enter title\",\n                  disabled: loading\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  className: \"fw-bold\",\n                  children: \"Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  as: \"textarea\",\n                  rows: 3,\n                  value: description,\n                  onChange: e => setDescription(e.target.value),\n                  placeholder: \"Optional description\",\n                  disabled: loading\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  className: \"fw-bold\",\n                  children: [\"Select File \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-danger\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 63\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `file-drop rounded-3 ${file ? 'has-file' : ''}`,\n                  onClick: () => {\n                    var _document$getElementB;\n                    return (_document$getElementB = document.getElementById('fileInput')) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.click();\n                  },\n                  children: !file ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"bi bi-cloud-upload-fill file-drop-icon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"file-drop-text\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Drop files here or click to upload\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 178,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-muted small\",\n                        children: \"PDF, JPG, PNG, DOC/DOCX \\u2014 Max 10MB\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 179,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 177,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"file-preview d-flex align-items-center justify-content-between\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: fileName\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 185,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-muted small\",\n                        children: [(file.size / 1024 / 1024).toFixed(2), \" MB\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 186,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      size: \"sm\",\n                      variant: \"outline-secondary\",\n                      onClick: e => {\n                        e.stopPropagation();\n                        clearFile();\n                      },\n                      children: \"Change\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  id: \"fileInput\",\n                  type: \"file\",\n                  accept: \".pdf,.jpg,.jpeg,.png,.doc,.docx\",\n                  onChange: handleFileChange,\n                  style: {\n                    display: 'none'\n                  },\n                  disabled: loading\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-end gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  className: \"btn-orange\",\n                  onClick: () => navigate('/document'),\n                  disabled: loading,\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  variant: \"primary\",\n                  className: \"upload-btn\",\n                  disabled: loading,\n                  children: [loading ? /*#__PURE__*/_jsxDEV(Spinner, {\n                    animation: \"border\",\n                    size: \"sm\",\n                    className: \"me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 32\n                  }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"bi bi-cloud-upload me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 92\n                  }, this), loading ? 'Uploading...' : 'Upload Document']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          lg: 4,\n          children: [/*#__PURE__*/_jsxDEV(Card, {\n            className: \"custom-card-recipients shadow-sm border-0 mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n              className: \"custom-card-header\",\n              children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"mb-0\",\n                children: [\"Recipients \", /*#__PURE__*/_jsxDEV(Badge, {\n                  bg: \"secondary\",\n                  children: recipientLabel(recipients.length)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(InputGroup, {\n                className: \"mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                  placeholder: \"Search recipients...\",\n                  value: recSearch,\n                  onChange: e => {\n                    setRecSearch(e.target.value);\n                    setRecPage(1);\n                  },\n                  disabled: loadingUsers\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  className: \"btn-orange\",\n                  onClick: () => {\n                    setRecSearch('');\n                    setRecPage(1);\n                  },\n                  children: \"Clear\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                className: \"g-2 mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(Form.Select, {\n                    value: recDeptFilter,\n                    onChange: e => {\n                      setRecDeptFilter(e.target.value);\n                      setRecPage(1);\n                    },\n                    children: deptOptions.map((d, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: d,\n                      children: d === 'all' ? 'All departments' : d\n                    }, i, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 220,\n                      columnNumber: 49\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(Form.Select, {\n                    value: recLevelFilter,\n                    onChange: e => {\n                      setRecLevelFilter(e.target.value);\n                      setRecPage(1);\n                    },\n                    children: accessLevelOptions.map((l, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: l,\n                      children: l === 'all' ? 'All levels' : `Level ${l}`\n                    }, i, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 225,\n                      columnNumber: 56\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex gap-2 mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  size: \"sm\",\n                  variant: \"outline-success\",\n                  onClick: selectAllFiltered,\n                  children: \"Select all\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"sm\",\n                  className: \"btn-orange\",\n                  variant: \"outline-secondary\",\n                  onClick: clearAllRecipients,\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"recipients-list\",\n                children: loadingUsers ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"py-4 text-center\",\n                  children: /*#__PURE__*/_jsxDEV(Spinner, {\n                    animation: \"border\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 55\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 21\n                }, this) : paginatedUsers.length ? paginatedUsers.map(u => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"recipient-row d-flex justify-content-between align-items-center mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"fw-bold\",\n                      children: u.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 240,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"small text-muted\",\n                      children: [u.email, \" \\u2022 \", u.department || '—']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 241,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n                    type: \"checkbox\",\n                    checked: recipients.includes(u.id),\n                    onChange: () => handleRecipientToggle(u.id)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 25\n                  }, this)]\n                }, u.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 23\n                }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"py-4 text-center text-muted\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"bi bi-people fs-3 mb-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 63\n                  }, this), \"No recipients found\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this), filteredUsers.length > ITEMS_PER_PAGE && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-3 d-flex justify-content-center\",\n                children: /*#__PURE__*/_jsxDEV(Pagination, {\n                  size: \"sm\",\n                  className: \"mb-0\",\n                  children: [/*#__PURE__*/_jsxDEV(Pagination.Prev, {\n                    onClick: () => setRecPage(p => Math.max(1, p - 1)),\n                    disabled: recPage === 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 23\n                  }, this), [...Array(totalRecPages)].map((_, i) => {\n                    const p = i + 1;\n                    if (p === 1 || p === totalRecPages || p >= recPage - 1 && p <= recPage + 1) {\n                      return /*#__PURE__*/_jsxDEV(Pagination.Item, {\n                        active: p === recPage,\n                        onClick: () => setRecPage(p),\n                        children: p\n                      }, p, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 260,\n                        columnNumber: 34\n                      }, this);\n                    }\n                    if (p === recPage - 2 || p === recPage + 2) return /*#__PURE__*/_jsxDEV(Pagination.Ellipsis, {\n                      disabled: true\n                    }, `e-${p}`, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 262,\n                      columnNumber: 65\n                    }, this);\n                    return null;\n                  }), /*#__PURE__*/_jsxDEV(Pagination.Next, {\n                    onClick: () => setRecPage(p => Math.min(totalRecPages, p + 1)),\n                    disabled: recPage === totalRecPages\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            className: \"custom-card-guidelines shadow-sm border-0 mt-3\",\n            children: /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"fw-bold mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-info-circle me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 46\n                }, this), \"Upload Guidelines\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"small mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Max file size: 10MB\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Supported: PDF, JPG, PNG, DOC/DOCX\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Title and at least one recipient required\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n};\n_s(UploadDocument, \"ytHUY9v03HjuaOqM3LO7dKYq3xo=\", false, function () {\n  return [useNavigate];\n});\n_c = UploadDocument;\nexport default UploadDocument;\nvar _c;\n$RefreshReg$(_c, \"UploadDocument\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","Container","Row","Col","Card","Form","Button","Alert","Badge","InputGroup","Spinner","Pagination","useNavigate","api","jsxDEV","_jsxDEV","Fragment","_Fragment","ITEMS_PER_PAGE","UploadDocument","user","_s","navigate","title","setTitle","description","setDescription","file","setFile","fileName","setFileName","users","setUsers","recipients","setRecipients","recSearch","setRecSearch","recDeptFilter","setRecDeptFilter","recLevelFilter","setRecLevelFilter","recPage","setRecPage","loading","setLoading","loadingUsers","setLoadingUsers","error","setError","success","setSuccess","mounted","fetchUsers","res","get","Array","isArray","data","err","console","filteredUsers","q","trim","toLowerCase","filter","u","department","String","access_level","name","includes","email","totalRecPages","Math","max","ceil","length","paginatedUsers","start","slice","handleRecipientToggle","userId","prev","id","selectAllFiltered","ids","map","from","Set","clearAllRecipients","handleFileChange","e","_e$target$files","f","target","files","clearFile","document","getElementById","value","handleSubmit","preventDefault","fd","FormData","append","forEach","post","headers","setTimeout","_err$response","_err$response$data","response","message","deptOptions","Boolean","accessLevelOptions","v","undefined","sort","a","b","recipientLabel","count","fluid","className","children","_jsxFileName","lineNumber","columnNumber","onSubmit","lg","Header","Body","variant","dismissible","onClose","Group","Label","Control","type","onChange","placeholder","disabled","as","rows","onClick","_document$getElementB","click","size","toFixed","stopPropagation","accept","style","display","animation","bg","Select","d","i","l","Check","checked","Prev","p","_","Item","active","Ellipsis","Next","min","_c","$RefreshReg$"],"sources":["/Users/darrel/SMART-DOCS-main/frontend/src/pages/documents/UploadDocument.jsx"],"sourcesContent":["// UploadDocument.jsx\nimport React, { useState, useEffect, useMemo } from 'react';\nimport {\n  Container, Row, Col, Card, Form, Button, Alert, Badge, InputGroup, Spinner, Pagination\n} from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../../services/api';\nimport '../../css/documents/uploaddocument.css';\n\nconst ITEMS_PER_PAGE = 10;\n\nconst UploadDocument = ({ user }) => {\n  const navigate = useNavigate();\n\n  // Form fields\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [file, setFile] = useState(null);\n  const [fileName, setFileName] = useState('');\n\n  // Users\n  const [users, setUsers] = useState([]);\n  const [recipients, setRecipients] = useState([]);\n\n  // Recipient UI state\n  const [recSearch, setRecSearch] = useState('');\n  const [recDeptFilter, setRecDeptFilter] = useState('all');\n  const [recLevelFilter, setRecLevelFilter] = useState('all');\n  const [recPage, setRecPage] = useState(1);\n\n  // Status\n  const [loading, setLoading] = useState(false);\n  const [loadingUsers, setLoadingUsers] = useState(true);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // Fetch users\n  useEffect(() => {\n    let mounted = true;\n    const fetchUsers = async () => {\n      setLoadingUsers(true);\n      try {\n        const res = await api.get('/admin/users');\n        if (!mounted) return;\n        setUsers(Array.isArray(res.data) ? res.data : res.data.data || []);\n      } catch (err) {\n        console.error('Failed to fetch users', err);\n      } finally {\n        if (mounted) setLoadingUsers(false);\n      }\n    };\n    fetchUsers();\n    return () => { mounted = false; };\n  }, []);\n\n  // Filtered users\n  const filteredUsers = useMemo(() => {\n    const q = recSearch.trim().toLowerCase();\n    return users.filter(u => {\n      if (recDeptFilter !== 'all' && (u.department || '').toLowerCase() !== recDeptFilter.toLowerCase()) return false;\n      if (recLevelFilter !== 'all' && String(u.access_level) !== String(recLevelFilter)) return false;\n      if (!q) return true;\n      return (\n        (u.name || '').toLowerCase().includes(q) ||\n        (u.email || '').toLowerCase().includes(q) ||\n        (u.department || '').toLowerCase().includes(q)\n      );\n    });\n  }, [users, recSearch, recDeptFilter, recLevelFilter]);\n\n  const totalRecPages = Math.max(1, Math.ceil(filteredUsers.length / ITEMS_PER_PAGE));\n  const paginatedUsers = useMemo(() => {\n    const start = (recPage - 1) * ITEMS_PER_PAGE;\n    return filteredUsers.slice(start, start + ITEMS_PER_PAGE);\n  }, [filteredUsers, recPage]);\n\n  // Recipient helpers\n  const handleRecipientToggle = (userId) => {\n    setRecipients(prev => prev.includes(userId) ? prev.filter(id => id !== userId) : [...prev, userId]);\n  };\n  const selectAllFiltered = () => {\n    const ids = filteredUsers.map(u => u.id);\n    setRecipients(prev => Array.from(new Set([...prev, ...ids])));\n  };\n  const clearAllRecipients = () => setRecipients([]);\n\n  // File handling\n  const handleFileChange = (e) => {\n    const f = e.target.files?.[0];\n    if (!f) return;\n    setFile(f);\n    setFileName(f.name);\n    setError('');\n  };\n\n  const clearFile = () => {\n    setFile(null);\n    setFileName('');\n    document.getElementById('fileInput') && (document.getElementById('fileInput').value = '');\n  };\n\n  // Submit\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(''); setSuccess('');\n    if (!title.trim()) return setError('Document title is required.');\n    if (!file) return setError('Please select a file to upload.');\n    if (!recipients.length) return setError('Select at least one recipient.');\n\n    setLoading(true);\n    try {\n      const fd = new FormData();\n      fd.append('title', title);\n      fd.append('description', description);\n      fd.append('file', file);\n      recipients.forEach(id => fd.append('recipients[]', id));\n\n      // Upload file and let backend handle OCR\n      await api.post('/document', fd, { headers: { 'Content-Type': 'multipart/form-data' } });\n\n      setSuccess('Document uploaded successfully!');\n      setTitle(''); setDescription(''); setFile(null); setFileName('');\n      setRecipients([]);\n      setRecSearch(''); setRecDeptFilter('all'); setRecLevelFilter('all'); setRecPage(1);\n\n      setTimeout(() => navigate('/document'), 1400);\n    } catch (err) {\n      console.error('Upload error:', err);\n      setError(err.response?.data?.message || 'Failed to upload document.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deptOptions = useMemo(() => ['all', ...Array.from(new Set(users.map(u => u.department).filter(Boolean)))], [users]);\n  const accessLevelOptions = useMemo(() => ['all', ...Array.from(new Set(users.map(u => u.access_level).filter(v => v !== undefined && v !== null))).sort((a,b)=>a-b)], [users]);\n  const recipientLabel = (count) => `${count} ${count === 1 ? 'recipient' : 'recipients'}`;\n\n  return (\n    <Container fluid className=\"upload-document-container\">\n      <Row className=\"mb-4\">\n        <Col>\n          <h2 className=\"dashboard-title\">Upload Document</h2>\n          <p className=\"dashboard-subtitle\">Upload and distribute documents</p>\n        </Col>\n      </Row>\n\n      <Form onSubmit={handleSubmit}>\n        <Row className=\"g-4\">\n\n          {/* LEFT — Document Details */}\n          <Col lg={8}>\n            <Card className=\"custom-card-details shadow-sm border-0\">\n              <Card.Header className=\"custom-card-header\">\n                <h5 className=\"mb-0\">Document Details</h5>\n              </Card.Header>\n              <Card.Body>\n                {error && <Alert variant=\"danger\" dismissible onClose={() => setError('')}>{error}</Alert>}\n                {success && <Alert variant=\"success\" dismissible onClose={() => setSuccess('')}>{success}</Alert>}\n\n                <Form.Group className=\"mb-3\">\n                  <Form.Label className=\"fw-bold\">Title <span className=\"text-danger\">*</span></Form.Label>\n                  <Form.Control type=\"text\" value={title} onChange={e => setTitle(e.target.value)} placeholder=\"Enter title\" disabled={loading} />\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\">\n                  <Form.Label className=\"fw-bold\">Description</Form.Label>\n                  <Form.Control as=\"textarea\" rows={3} value={description} onChange={e => setDescription(e.target.value)} placeholder=\"Optional description\" disabled={loading} />\n                </Form.Group>\n\n                <Form.Group className=\"mb-4\">\n                  <Form.Label className=\"fw-bold\">Select File <span className=\"text-danger\">*</span></Form.Label>\n                  <div className={`file-drop rounded-3 ${file ? 'has-file' : ''}`} onClick={() => document.getElementById('fileInput')?.click()}>\n                    {!file ? (\n                      <>\n                        <i className=\"bi bi-cloud-upload-fill file-drop-icon\" />\n                        <div className=\"file-drop-text\">\n                          <strong>Drop files here or click to upload</strong>\n                          <div className=\"text-muted small\">PDF, JPG, PNG, DOC/DOCX — Max 10MB</div>\n                        </div>\n                      </>\n                    ) : (\n                      <div className=\"file-preview d-flex align-items-center justify-content-between\">\n                        <div>\n                          <strong>{fileName}</strong>\n                          <div className=\"text-muted small\">{(file.size/1024/1024).toFixed(2)} MB</div>\n                        </div>\n                        <Button size=\"sm\" variant=\"outline-secondary\" onClick={e => { e.stopPropagation(); clearFile(); }}>Change</Button>\n                      </div>\n                    )}\n                  </div>\n                  <Form.Control id=\"fileInput\" type=\"file\" accept=\".pdf,.jpg,.jpeg,.png,.doc,.docx\" onChange={handleFileChange} style={{ display: 'none' }} disabled={loading} />\n                </Form.Group>\n\n                <div className=\"d-flex justify-content-end gap-2\">\n                  <Button variant=\"outline-secondary\" className=\"btn-orange\" onClick={() => navigate('/document')} disabled={loading}>Cancel</Button>\n                  <Button type=\"submit\" variant=\"primary\" className=\"upload-btn\" disabled={loading}>\n                    {loading ? <Spinner animation=\"border\" size=\"sm\" className=\"me-2\" /> : <i className=\"bi bi-cloud-upload me-2\" />}\n                    {loading ? 'Uploading...' : 'Upload Document'}\n                  </Button>\n                </div>\n              </Card.Body>\n            </Card>\n          </Col>\n\n          {/* RIGHT — Recipients */}\n          <Col lg={4}>\n            <Card className=\"custom-card-recipients shadow-sm border-0 mb-3\">\n              <Card.Header className=\"custom-card-header\">\n                <h5 className=\"mb-0\">Recipients <Badge bg=\"secondary\">{recipientLabel(recipients.length)}</Badge></h5>\n              </Card.Header>\n              <Card.Body>\n                <InputGroup className=\"mb-2\">\n                  <Form.Control placeholder=\"Search recipients...\" value={recSearch} onChange={e => { setRecSearch(e.target.value); setRecPage(1); }} disabled={loadingUsers} />\n                  <Button variant=\"outline-secondary\" className=\"btn-orange\" onClick={() => { setRecSearch(''); setRecPage(1); }}>Clear</Button>\n                </InputGroup>\n                <Row className=\"g-2 mb-3\">\n                  <Col>\n                    <Form.Select value={recDeptFilter} onChange={e => { setRecDeptFilter(e.target.value); setRecPage(1); }}>\n                      {deptOptions.map((d,i) => <option key={i} value={d}>{d==='all'?'All departments':d}</option>)}\n                    </Form.Select>\n                  </Col>\n                  <Col>\n                    <Form.Select value={recLevelFilter} onChange={e => { setRecLevelFilter(e.target.value); setRecPage(1); }}>\n                      {accessLevelOptions.map((l,i) => <option key={i} value={l}>{l==='all'?'All levels':`Level ${l}`}</option>)}\n                    </Form.Select>\n                  </Col>\n                </Row>\n                <div className=\"d-flex gap-2 mb-3\">\n                  <Button size=\"sm\" variant=\"outline-success\" onClick={selectAllFiltered}>Select all</Button>\n                  <Button size=\"sm\" className=\"btn-orange\" variant=\"outline-secondary\" onClick={clearAllRecipients}>Remove</Button>\n                </div>\n                <div className=\"recipients-list\">\n                  {loadingUsers ? (\n                    <div className=\"py-4 text-center\"><Spinner animation=\"border\" /></div>\n                  ) : paginatedUsers.length ? (\n                    paginatedUsers.map(u => (\n                      <div key={u.id} className=\"recipient-row d-flex justify-content-between align-items-center mb-2\">\n                        <div>\n                          <div className=\"fw-bold\">{u.name}</div>\n                          <div className=\"small text-muted\">{u.email} • {u.department || '—'}</div>\n                        </div>\n                        <Form.Check type=\"checkbox\" checked={recipients.includes(u.id)} onChange={() => handleRecipientToggle(u.id)} />\n                      </div>\n                    ))\n                  ) : (\n                    <div className=\"py-4 text-center text-muted\">\n                      <i className=\"bi bi-people fs-3 mb-2\" /><br/>\n                      No recipients found\n                    </div>\n                  )}\n                </div>\n                {filteredUsers.length > ITEMS_PER_PAGE && (\n                  <div className=\"mt-3 d-flex justify-content-center\">\n                    <Pagination size=\"sm\" className=\"mb-0\">\n                      <Pagination.Prev onClick={() => setRecPage(p => Math.max(1, p-1))} disabled={recPage===1}/>\n                      {[...Array(totalRecPages)].map((_,i)=>{\n                        const p=i+1;\n                        if(p===1||p===totalRecPages||(p>=recPage-1&&p<=recPage+1)){\n                          return <Pagination.Item key={p} active={p===recPage} onClick={()=>setRecPage(p)}>{p}</Pagination.Item>\n                        }\n                        if(p===recPage-2||p===recPage+2) return <Pagination.Ellipsis key={`e-${p}`} disabled />;\n                        return null;\n                      })}\n                      <Pagination.Next onClick={() => setRecPage(p => Math.min(totalRecPages, p+1))} disabled={recPage===totalRecPages}/>\n                    </Pagination>\n                  </div>\n                )}\n              </Card.Body>\n            </Card>\n\n            <Card className=\"custom-card-guidelines shadow-sm border-0 mt-3\">\n              <Card.Body>\n                <h6 className=\"fw-bold mb-2\"><i className=\"bi bi-info-circle me-2\"></i>Upload Guidelines</h6>\n                <ul className=\"small mb-2\">\n                  <li>Max file size: 10MB</li>\n                  <li>Supported: PDF, JPG, PNG, DOC/DOCX</li>\n                  <li>Title and at least one recipient required</li>\n                </ul>\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n      </Form>\n    </Container>\n  );\n};\n\nexport default UploadDocument;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}